<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Spectator - Formula Student Driverless Simulator</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  <link href="../css/version-select.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Spectator";
    var mkdocs_page_input_path = "spectator.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Formula Student Driverless Simulator</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Introduction</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../system-overview/">System overview</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../getting-started/">Getting started</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../integration-handbook/">Integration handbook</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Vehicle & Sensors</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../vehicle_model/">Vehicle model</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../imu/">IMU</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../lidar/">Lidar</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../gps/">GPS</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">#tech madness</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../ros-bridge/">ROS Bridge</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../statistics/">ROS Bridge statistics</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../joystick/">Joystick</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../operator/">Operator</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Spectator</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#1-run-the-simulation-in-server-mode">1. Run the simulation in server mode</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#2-running-the-spectator">2. Running the spectator</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#3-using-the-spectator">3. Using the spectator</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#4-adding-spectator-points-to-the-map">4. Adding spectator points to the map</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../import-car-3d-model/">Import your 3d car model</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../gcp-remote-workstation/">Google cloud remote workstation</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../software-install-instructions/">Software install instructions</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../how-to-release/">How to release</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Formula Student Driverless Simulator</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>#tech madness &raquo;</li>
        
      
    
    <li>Spectator</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/FS-Online/Formula-Student-Driverless-Simulator/edit/master/docs/spectator.md"> Edit on FS-Online/Formula-Student-Driverless-Simulator</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="spectator">Spectator</h1>
<p>The spectator provides an eye into the virtual world from an external computer.
Through a network connection the virtual world state is replicated and shown on the screen.
The user can operate the camera with its mouse and keyboard.</p>
<h2 id="1-run-the-simulation-in-server-mode">1. Run the simulation in server mode</h2>
<p>Download the packaged version of the unreal game and run it using:</p>
<pre><code>FSDS.exe /Game/TrainingMap?listen -log PORT=7777
</code></pre>

<p>This will launch the simulation as a listen server.
This means that the game will run as normal but external clients are welcome to connect.</p>
<p>If you want to give access to clients from external computers you must ensure the specified port is accessible. 
In most cases you will have to add a firewall rule to allow the traffic.
When behind a router you might need to do some port forwarding.
Both TCP and UDP traffic must be able to travel from client to server on the configured port.</p>
<h2 id="2-running-the-spectator">2. Running the spectator</h2>
<p>Now we need to run the simulation on another computer pointing at the server.
You must use the same version of binaries as the server.
Run the simulation as follows:</p>
<pre><code>FSDS.exe 0.0.0.0 -log PORT=7777
</code></pre>

<p>Where <code>0.0.0.0</code> is replaced by the external ip of the server.</p>
<p>If the connection fails the game willback to running as a normal simulation.
This fallback initiates after a connection timeout of 20 seconds.</p>
<p>Theoretically multiple simultaneous spectators in a single world should work but this is not tested or supported.</p>
<h2 id="3-using-the-spectator">3. Using the spectator</h2>
<p>When starting the spectator it will be launched in follow-car mode.
In this mode the camera will always point at the vehicle.
When the vehicle crosses a triggerline, the camera will move to another viewpoint.</p>
<p>You can toggle the follow-car mode using the <code>F</code> key on your keyboard.
When not following the car you can use the <code>wsdaqe</code> keys to move around and your mouse to look around.</p>
<h2 id="4-adding-spectator-points-to-the-map">4. Adding spectator points to the map</h2>
<p>Spectator viewpoints are places in the world where the spectator can be teleported to.
These locations are defined in the map and cannot be changed during the simulation.
To create a new viewpoint, add a new <code>CameraActor</code> to the world and place it wherever you like.
Next, add a <code>AirsimSpectatorTeleportTrigger</code> to the world.
In the settings, set the camera to the one you just created.
Whenever the vehicle touches this trigger object, the spectator will be teleported to the selected camera (in follow-car mode).</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../import-car-3d-model/" class="btn btn-neutral float-right" title="Import your 3d car model">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../operator/" class="btn btn-neutral" title="Operator"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>GPLv2</p>
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../operator/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../import-car-3d-model/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../js/version-select.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
